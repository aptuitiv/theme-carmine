
{% import 'macros/macros' as macros %}

<div class="Box-heading u-textCenter"> 
    {% if miniGrid.previousDateUrl %}
        <a href="{{ miniGrid.previousDateUrl }}" class="CalendarMiniGrid-navPrev" title="Go to the previous date range">{{ macros.iconImg('caret-left', 'Go to the previous month', 'CalendarMiniGrid-headingIcon') }}</a> 
    {% endif %}
    {% set month = dateRanges.month|first %}
    <a href="{{ month.url }}" class="u-linkSubtle">
        {{ miniGrid.month }} 
        {{ miniGrid.year }}
    </a>
    {% if miniGrid.nextDateUrl %}
        <a href="{{ miniGrid.nextDateUrl }}" class="CalendarMiniGrid-navNext" title="Go to the next date range">{{ macros.iconImg('caret-right', 'Go to the next month', 'CalendarMiniGrid-headingIcon') }}</a>
    {% endif %}
</div>

<table class="CalendarMiniGrid u-margBottom4"> 
    <thead class="CalendarMiniGrid-head">
        <tr>
            <th class="CalendarMiniGrid-headCell">S</th>
            <th class="CalendarMiniGrid-headCell">M</th>
            <th class="CalendarMiniGrid-headCell">T</th>
            <th class="CalendarMiniGrid-headCell">W</th>
            <th class="CalendarMiniGrid-headCell">T</th>
            <th class="CalendarMiniGrid-headCell">F</th>
            <th class="CalendarMiniGrid-headCell">S</th>
        </tr>
    </thead> 
    <tbody class="CalendarMiniGrid-body">
    {% for row in miniGrid.rows %}
        <tr>
        {% for box in row.boxes %}
            {% set class = 'CalendarMiniGrid-cell' %}
            {% if box.isWeekend == true && box.isThisMonth == true %}
                {% set class = class ~ ' ' ~ 'CalendarMiniGrid-cell--isEnd' %}
            {% endif %}
            {% if box.isToday %}
                {% set class = class ~ ' ' ~ 'CalendarMiniGrid-cell--isToday' %}
            {% endif %}
            {% if box.isThisMonth == false %}
                {% set class = class ~ ' ' ~ 'CalendarMiniGrid-cell--isEmpty' %}
            {% endif %}
            <td class="{{ class|trim }}">
            {% if box.isThisMonth %}
                {% if box.eventCount > 0 %}
                    <a href="{{ box.dayUrl }}" class="CalendarMiniGrid-dateLink{% if box.isToday %} CalendarMiniGrid-dateLink--isToday{% endif %}{% if box.isCurrentDay %} CalendarMiniGrid-dateLink--isCurrentDay{% endif %}">{{ box.dayShort }}</a>
                {% else %}
                    {{ box.dayShort }}
                {% endif %} 
            {% endif %}
            </td>
        {% endfor %}
        </tr>
    {% endfor %}
    </tbody> 
</table>

<div class="Box u-margBottom4">
    <div class="Box-heading">{{ macros.iconImg('calendar', 'Change date', 'CalendarMiniGrid-headingIcon') }} Change Date</div>
    <div class="Box-inner">
        <form action="{{ dateNavigation.form.action }}" method="{{ dateNavigation.form.method }}">
            <div class="u-flex">
                {% set dateNavigation.form.fields.month.class = "SelectInput u-widthFull u-margRight1" %}
                {{ dateNavigation.form.fields.month.tag }}
                {% set dateNavigation.form.fields.year.class = "SelectInput" %}
                {{ dateNavigation.form.fields.year.tag }}
                {{ dateNavigation.form.fields.view.tag }}
            </div>
            <button type="submit" class="Button u-margTop1 u-widthFull">Go</button>
        </form>
    </div>
</div>

{{ _api.calendar.searchForm.template('sidebar-search.twig') }}
